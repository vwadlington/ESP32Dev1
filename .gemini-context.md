# ESP32-S3 LCD EV Board Project Context

## 1. Project Overview

This is a project for the ESP32-S3-LCD-EV-BOARD with sub-board 3 (800x480 RGB display).

- **Primary Goal:** [Describe the main goal of the application, e.g., "To build a touch-enabled weather display panel."]
- **Core Framework:** ESP-IDF
- **Board Support Package (BSP):** Utilizes the Espressif `esp32_s3_lcd_ev_board` BSP for board initialization and drivers.
- **Key Dependencies:** LVGL for the graphical user interface.

---

## 2. Development Environment & Toolchain

- **SDK:** ESP-IDF v5.1 or later.
- **Environment Setup:** Assume a standard ESP-IDF environment is configured. Use `idf.py` for all project interactions.

---

## 3. Key Commands

- **Build Project:** `idf.py build`
- **Configure Project:** `idf.py menuconfig`
- **Flash Device:** `idf.py flash`
- **Monitor Serial Output:** `idf.py monitor`
- **Build, Flash, Monitor:** `idf.py flash monitor`
- **Clean Project:** `idf.py fullclean`
- **Run Unit Tests:** `idf.py test`

---

## 4. Project Structure

- `main/`: Contains the primary application logic (`main.c`).
- `components/`: For custom, project-specific components.
- `components/minigui`: This component will handle building the LVGL GUI. It is a submodule from a separate repository.
- `managed_components/`: Dependencies managed by the ESP-IDF component manager. **Do not edit files here directly.**
- `partitions.csv`: Defines the flash memory layout.
- `test/`: Contains unit tests for the project components.

---

## 5. Coding Conventions

- **Language:** C11
- **Style:** Follow the [ESP-IDF Style Guide](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/contribute/style-guide.html).
- **Naming:**
  - Functions: `snake_case()`
  - Variables: `snake_case`
  - Macros & Constants: `UPPER_SNAKE_CASE`
- **Headers:** All public-facing header files (`.h`) must have include guards.
- **Comments:** Use `//` for single-line and `/* ... */` for multi-line comments. Document all public functions in the header file.
- **Documentation** use this page to help make the comments in a standard type for documentation purposes (https://docs.espressif.com/projects/esp-idf/en/latest/esp32/contribute/documenting-code.html)

---

## 6. Error Handling Strategy

- **Return Values:** Functions that can fail must return an `esp_err_t`.
- **Error Checking:** Use `ESP_ERROR_CHECK()` for critical, unrecoverable errors that should halt the program. For recoverable errors, check the return value and handle the error gracefully.
- **Error Propagation:** Propagate `esp_err_t` return codes up the call stack unless they can be handled at a lower level.

---

## 7. Logging Guidelines
- **TBD**

---

## 8. Testing Strategy

**TBD**

---

## 9. Git Workflow

- **Branching Model:**
  - `main`: Production-ready, stable code only.
  - `develop`: Main integration branch for new features.
  - `feat/<feature-name>`: Feature branches, created from `develop`.
- **Commit Messages:** Follow the [Conventional Commits](https:/`/www.conventionalcommits.org/en/v1.0.0`/) specification.
  - Example: `feat(minigui): add support for circular buttons`
- **Submodules:**
  - The `components/minigui` directory is a Git submodule.
  - Changes to this component must be committed and pushed to its own repository *before* committing the pointer update in this parent repository.

---

## 10. Gemini Guidelines

**Constraint:** Do not write, delete, or modify any files directly.

**Action:**
1.  All code changes must be provided in markdown code blocks. I will review and apply the changes myself.
2.  For new files, provide the target file path and the complete content in a markdown block.
3.  After providing a code change, you may verify it by running `idf.py build` to ensure it compiles without errors.